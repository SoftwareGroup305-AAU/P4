@echo off
setlocal

set GCC_PATH=c:\Users\Emil\AppData\Local\Arduino15\packages\arduino\tools\arm-none-eabi-gcc\7-2017q4\bin
set CORE_PATH=C:\Users\Emil\AppData\Local\Temp\arduino\cores\arduino_samd_mkrwifi1010_ec4dc2770817a483d95ed3f1b705ee79
set CMSIS_LIB_PATH=C:\Users\Emil\AppData\Local\Arduino15\packages\arduino\tools\CMSIS\4.5.0\CMSIS\Lib\GCC
set VARIANT_PATH=C:\Users\Emil\AppData\Local\Arduino15\packages\arduino\hardware\samd\1.8.14\variants\mkrwifi1010

echo Assembling the assembly file...
%GCC_PATH%\arm-none-eabi-as.exe -mcpu=cortex-m0plus -mthumb -o test.o test.s

echo Compiling and linking...
%GCC_PATH%\arm-none-eabi-gcc.exe -Os --specs=nano.specs --specs=nosys.specs -mcpu=cortex-m0plus -mthumb -T"%VARIANT_PATH%\linker_scripts\gcc\flash_with_bootloader.ld" "-Wl,--gc-sections,-Map,output.map" -o test.elf test.o -L"%CMSIS_LIB_PATH%" -larm_cortexM0l_math -lm "%CORE_PATH%\core.a"

echo Generating binary and hex files...
%GCC_PATH%\arm-none-eabi-objcopy -O binary test.elf test.bin
%GCC_PATH%\arm-none-eabi-objcopy -O ihex test.elf test.hex

echo Done.
pause
endlocal


FQBN: arduino:samd:mkrwifi1010
Using board 'mkrwifi1010' from platform in folder: /Users/emilpriv/Library/Arduino15/packages/arduino/hardware/samd/1.8.14
Using core 'arduino' from platform in folder: /Users/emilpriv/Library/Arduino15/packages/arduino/hardware/samd/1.8.14

Detecting libraries used...
/Users/emilpriv/Library/Arduino15/packages/arduino/tools/arm-none-eabi-gcc/7-2017q4/bin/arm-none-eabi-g++ -mcpu=cortex-m0plus -mthumb -c -g -Os -w -std=gnu++11 -ffunction-sections -fdata-sections -fno-threadsafe-statics -nostdlib --param max-inline-insns-single=500 -fno-rtti -fno-exceptions -w -x c++ -E -CC -DF_CPU=48000000L -DARDUINO=10607 -DARDUINO_SAMD_MKRWIFI1010 -DARDUINO_ARCH_SAMD -DUSE_ARDUINO_MKR_PIN_LAYOUT -D__SAMD21G18A__ -DUSB_VID=0x2341 -DUSB_PID=0x8054 -DUSBCON -DUSB_MANUFACTURER="Arduino LLC" -DUSB_PRODUCT="Arduino MKR WiFi 1010" -DUSE_BQ24195L_PMIC -I/Users/emilpriv/Library/Arduino15/packages/arduino/tools/CMSIS/4.5.0/CMSIS/Include/ -I/Users/emilpriv/Library/Arduino15/packages/arduino/tools/CMSIS-Atmel/1.2.0/CMSIS/Device/ATMEL/ -I/Users/emilpriv/Library/Arduino15/packages/arduino/hardware/samd/1.8.14/cores/arduino/api/deprecated -I/Users/emilpriv/Library/Arduino15/packages/arduino/hardware/samd/1.8.14/cores/arduino/api/deprecated-avr-comp -I/Users/emilpriv/Library/Arduino15/packages/arduino/hardware/samd/1.8.14/cores/arduino -I/Users/emilpriv/Library/Arduino15/packages/arduino/hardware/samd/1.8.14/variants/mkrwifi1010 /private/var/folders/nd/95n05jsj20g63nqfm1vz_vkm0000gn/T/arduino/sketches/9D8047D669B2ADB9FDBCC0BAAD143A69/sketch/sketch_may2a.ino.cpp -o /dev/null
Alternatives for Stepper.h: [Stepper@1.1.3]
ResolveLibrary(Stepper.h)
  -> candidates: [Stepper@1.1.3]
/Users/emilpriv/Library/Arduino15/packages/arduino/tools/arm-none-eabi-gcc/7-2017q4/bin/arm-none-eabi-g++ -mcpu=cortex-m0plus -mthumb -c -g -Os -w -std=gnu++11 -ffunction-sections -fdata-sections -fno-threadsafe-statics -nostdlib --param max-inline-insns-single=500 -fno-rtti -fno-exceptions -w -x c++ -E -CC -DF_CPU=48000000L -DARDUINO=10607 -DARDUINO_SAMD_MKRWIFI1010 -DARDUINO_ARCH_SAMD -DUSE_ARDUINO_MKR_PIN_LAYOUT -D__SAMD21G18A__ -DUSB_VID=0x2341 -DUSB_PID=0x8054 -DUSBCON -DUSB_MANUFACTURER="Arduino LLC" -DUSB_PRODUCT="Arduino MKR WiFi 1010" -DUSE_BQ24195L_PMIC -I/Users/emilpriv/Library/Arduino15/packages/arduino/tools/CMSIS/4.5.0/CMSIS/Include/ -I/Users/emilpriv/Library/Arduino15/packages/arduino/tools/CMSIS-Atmel/1.2.0/CMSIS/Device/ATMEL/ -I/Users/emilpriv/Library/Arduino15/packages/arduino/hardware/samd/1.8.14/cores/arduino/api/deprecated -I/Users/emilpriv/Library/Arduino15/packages/arduino/hardware/samd/1.8.14/cores/arduino/api/deprecated-avr-comp -I/Users/emilpriv/Library/Arduino15/packages/arduino/hardware/samd/1.8.14/cores/arduino -I/Users/emilpriv/Library/Arduino15/packages/arduino/hardware/samd/1.8.14/variants/mkrwifi1010 -I/Users/emilpriv/Library/Arduino15/libraries/Stepper/src /private/var/folders/nd/95n05jsj20g63nqfm1vz_vkm0000gn/T/arduino/sketches/9D8047D669B2ADB9FDBCC0BAAD143A69/sketch/sketch_may2a.ino.cpp -o /dev/null
/Users/emilpriv/Library/Arduino15/packages/arduino/tools/arm-none-eabi-gcc/7-2017q4/bin/arm-none-eabi-g++ -mcpu=cortex-m0plus -mthumb -c -g -Os -w -std=gnu++11 -ffunction-sections -fdata-sections -fno-threadsafe-statics -nostdlib --param max-inline-insns-single=500 -fno-rtti -fno-exceptions -w -x c++ -E -CC -DF_CPU=48000000L -DARDUINO=10607 -DARDUINO_SAMD_MKRWIFI1010 -DARDUINO_ARCH_SAMD -DUSE_ARDUINO_MKR_PIN_LAYOUT -D__SAMD21G18A__ -DUSB_VID=0x2341 -DUSB_PID=0x8054 -DUSBCON -DUSB_MANUFACTURER="Arduino LLC" -DUSB_PRODUCT="Arduino MKR WiFi 1010" -DUSE_BQ24195L_PMIC -I/Users/emilpriv/Library/Arduino15/packages/arduino/tools/CMSIS/4.5.0/CMSIS/Include/ -I/Users/emilpriv/Library/Arduino15/packages/arduino/tools/CMSIS-Atmel/1.2.0/CMSIS/Device/ATMEL/ -I/Users/emilpriv/Library/Arduino15/packages/arduino/hardware/samd/1.8.14/cores/arduino/api/deprecated -I/Users/emilpriv/Library/Arduino15/packages/arduino/hardware/samd/1.8.14/cores/arduino/api/deprecated-avr-comp -I/Users/emilpriv/Library/Arduino15/packages/arduino/hardware/samd/1.8.14/cores/arduino -I/Users/emilpriv/Library/Arduino15/packages/arduino/hardware/samd/1.8.14/variants/mkrwifi1010 -I/Users/emilpriv/Library/Arduino15/libraries/Stepper/src /Users/emilpriv/Library/Arduino15/libraries/Stepper/src/Stepper.cpp -o /dev/null
Generating function prototypes...
/Users/emilpriv/Library/Arduino15/packages/arduino/tools/arm-none-eabi-gcc/7-2017q4/bin/arm-none-eabi-g++ -mcpu=cortex-m0plus -mthumb -c -g -Os -w -std=gnu++11 -ffunction-sections -fdata-sections -fno-threadsafe-statics -nostdlib --param max-inline-insns-single=500 -fno-rtti -fno-exceptions -w -x c++ -E -CC -DF_CPU=48000000L -DARDUINO=10607 -DARDUINO_SAMD_MKRWIFI1010 -DARDUINO_ARCH_SAMD -DUSE_ARDUINO_MKR_PIN_LAYOUT -D__SAMD21G18A__ -DUSB_VID=0x2341 -DUSB_PID=0x8054 -DUSBCON -DUSB_MANUFACTURER="Arduino LLC" -DUSB_PRODUCT="Arduino MKR WiFi 1010" -DUSE_BQ24195L_PMIC -I/Users/emilpriv/Library/Arduino15/packages/arduino/tools/CMSIS/4.5.0/CMSIS/Include/ -I/Users/emilpriv/Library/Arduino15/packages/arduino/tools/CMSIS-Atmel/1.2.0/CMSIS/Device/ATMEL/ -I/Users/emilpriv/Library/Arduino15/packages/arduino/hardware/samd/1.8.14/cores/arduino/api/deprecated -I/Users/emilpriv/Library/Arduino15/packages/arduino/hardware/samd/1.8.14/cores/arduino/api/deprecated-avr-comp -I/Users/emilpriv/Library/Arduino15/packages/arduino/hardware/samd/1.8.14/cores/arduino -I/Users/emilpriv/Library/Arduino15/packages/arduino/hardware/samd/1.8.14/variants/mkrwifi1010 -I/Users/emilpriv/Library/Arduino15/libraries/Stepper/src /private/var/folders/nd/95n05jsj20g63nqfm1vz_vkm0000gn/T/arduino/sketches/9D8047D669B2ADB9FDBCC0BAAD143A69/sketch/sketch_may2a.ino.cpp -o /private/var/folders/nd/95n05jsj20g63nqfm1vz_vkm0000gn/T/130036575/sketch_merged.cpp
/Users/emilpriv/Library/Arduino15/packages/builtin/tools/ctags/5.8-arduino11/ctags -u --language-force=c++ -f - --c++-kinds=svpf --fields=KSTtzns --line-directives /private/var/folders/nd/95n05jsj20g63nqfm1vz_vkm0000gn/T/130036575/sketch_merged.cpp
Compiling sketch...
/Users/emilpriv/Library/Arduino15/packages/arduino/tools/arm-none-eabi-gcc/7-2017q4/bin/arm-none-eabi-g++ -mcpu=cortex-m0plus -mthumb -c -g -Os -w -std=gnu++11 -ffunction-sections -fdata-sections -fno-threadsafe-statics -nostdlib --param max-inline-insns-single=500 -fno-rtti -fno-exceptions -MMD -DF_CPU=48000000L -DARDUINO=10607 -DARDUINO_SAMD_MKRWIFI1010 -DARDUINO_ARCH_SAMD -DUSE_ARDUINO_MKR_PIN_LAYOUT -D__SAMD21G18A__ -DUSB_VID=0x2341 -DUSB_PID=0x8054 -DUSBCON "-DUSB_MANUFACTURER=\"Arduino LLC\"" "-DUSB_PRODUCT=\"Arduino MKR WiFi 1010\"" -DUSE_BQ24195L_PMIC -I/Users/emilpriv/Library/Arduino15/packages/arduino/tools/CMSIS/4.5.0/CMSIS/Include/ -I/Users/emilpriv/Library/Arduino15/packages/arduino/tools/CMSIS-Atmel/1.2.0/CMSIS/Device/ATMEL/ -I/Users/emilpriv/Library/Arduino15/packages/arduino/hardware/samd/1.8.14/cores/arduino/api/deprecated -I/Users/emilpriv/Library/Arduino15/packages/arduino/hardware/samd/1.8.14/cores/arduino/api/deprecated-avr-comp -I/Users/emilpriv/Library/Arduino15/packages/arduino/hardware/samd/1.8.14/cores/arduino -I/Users/emilpriv/Library/Arduino15/packages/arduino/hardware/samd/1.8.14/variants/mkrwifi1010 -I/Users/emilpriv/Library/Arduino15/libraries/Stepper/src /private/var/folders/nd/95n05jsj20g63nqfm1vz_vkm0000gn/T/arduino/sketches/9D8047D669B2ADB9FDBCC0BAAD143A69/sketch/sketch_may2a.ino.cpp -o /private/var/folders/nd/95n05jsj20g63nqfm1vz_vkm0000gn/T/arduino/sketches/9D8047D669B2ADB9FDBCC0BAAD143A69/sketch/sketch_may2a.ino.cpp.o
Compiling libraries...
Compiling library "Stepper"
/Users/emilpriv/Library/Arduino15/packages/arduino/tools/arm-none-eabi-gcc/7-2017q4/bin/arm-none-eabi-g++ -mcpu=cortex-m0plus -mthumb -c -g -Os -w -std=gnu++11 -ffunction-sections -fdata-sections -fno-threadsafe-statics -nostdlib --param max-inline-insns-single=500 -fno-rtti -fno-exceptions -MMD -DF_CPU=48000000L -DARDUINO=10607 -DARDUINO_SAMD_MKRWIFI1010 -DARDUINO_ARCH_SAMD -DUSE_ARDUINO_MKR_PIN_LAYOUT -D__SAMD21G18A__ -DUSB_VID=0x2341 -DUSB_PID=0x8054 -DUSBCON "-DUSB_MANUFACTURER=\"Arduino LLC\"" "-DUSB_PRODUCT=\"Arduino MKR WiFi 1010\"" -DUSE_BQ24195L_PMIC -I/Users/emilpriv/Library/Arduino15/packages/arduino/tools/CMSIS/4.5.0/CMSIS/Include/ -I/Users/emilpriv/Library/Arduino15/packages/arduino/tools/CMSIS-Atmel/1.2.0/CMSIS/Device/ATMEL/ -I/Users/emilpriv/Library/Arduino15/packages/arduino/hardware/samd/1.8.14/cores/arduino/api/deprecated -I/Users/emilpriv/Library/Arduino15/packages/arduino/hardware/samd/1.8.14/cores/arduino/api/deprecated-avr-comp -I/Users/emilpriv/Library/Arduino15/packages/arduino/hardware/samd/1.8.14/cores/arduino -I/Users/emilpriv/Library/Arduino15/packages/arduino/hardware/samd/1.8.14/variants/mkrwifi1010 -I/Users/emilpriv/Library/Arduino15/libraries/Stepper/src /Users/emilpriv/Library/Arduino15/libraries/Stepper/src/Stepper.cpp -o /private/var/folders/nd/95n05jsj20g63nqfm1vz_vkm0000gn/T/arduino/sketches/9D8047D669B2ADB9FDBCC0BAAD143A69/libraries/Stepper/Stepper.cpp.o
Compiling core...
Using previously compiled file: /private/var/folders/nd/95n05jsj20g63nqfm1vz_vkm0000gn/T/arduino/sketches/9D8047D669B2ADB9FDBCC0BAAD143A69/core/variant.cpp.o
Using precompiled core: /private/var/folders/nd/95n05jsj20g63nqfm1vz_vkm0000gn/T/arduino/cores/arduino_samd_mkrwifi1010_51b685d58ac095114e1a263ef8786823/core.a
Linking everything together...
/Users/emilpriv/Library/Arduino15/packages/arduino/tools/arm-none-eabi-gcc/7-2017q4/bin/arm-none-eabi-g++ -L/private/var/folders/nd/95n05jsj20g63nqfm1vz_vkm0000gn/T/arduino/sketches/9D8047D669B2ADB9FDBCC0BAAD143A69 -Os -Wl,--gc-sections -save-temps -T/Users/emilpriv/Library/Arduino15/packages/arduino/hardware/samd/1.8.14/variants/mkrwifi1010/linker_scripts/gcc/flash_with_bootloader.ld -Wl,-Map,/private/var/folders/nd/95n05jsj20g63nqfm1vz_vkm0000gn/T/arduino/sketches/9D8047D669B2ADB9FDBCC0BAAD143A69/sketch_may2a.ino.map --specs=nano.specs --specs=nosys.specs -mcpu=cortex-m0plus -mthumb -Wl,--cref -Wl,--check-sections -Wl,--gc-sections -Wl,--unresolved-symbols=report-all -Wl,--warn-common -Wl,--warn-section-align -o /private/var/folders/nd/95n05jsj20g63nqfm1vz_vkm0000gn/T/arduino/sketches/9D8047D669B2ADB9FDBCC0BAAD143A69/sketch_may2a.ino.elf /private/var/folders/nd/95n05jsj20g63nqfm1vz_vkm0000gn/T/arduino/sketches/9D8047D669B2ADB9FDBCC0BAAD143A69/sketch/sketch_may2a.ino.cpp.o /private/var/folders/nd/95n05jsj20g63nqfm1vz_vkm0000gn/T/arduino/sketches/9D8047D669B2ADB9FDBCC0BAAD143A69/libraries/Stepper/Stepper.cpp.o /private/var/folders/nd/95n05jsj20g63nqfm1vz_vkm0000gn/T/arduino/sketches/9D8047D669B2ADB9FDBCC0BAAD143A69/core/variant.cpp.o -Wl,--start-group -L/Users/emilpriv/Library/Arduino15/packages/arduino/tools/CMSIS/4.5.0/CMSIS/Lib/GCC/ -larm_cortexM0l_math -lm /private/var/folders/nd/95n05jsj20g63nqfm1vz_vkm0000gn/T/arduino/sketches/9D8047D669B2ADB9FDBCC0BAAD143A69/../../cores/arduino_samd_mkrwifi1010_51b685d58ac095114e1a263ef8786823/core.a -Wl,--end-group
/Users/emilpriv/Library/Arduino15/packages/arduino/tools/arm-none-eabi-gcc/7-2017q4/bin/arm-none-eabi-objcopy -O binary /private/var/folders/nd/95n05jsj20g63nqfm1vz_vkm0000gn/T/arduino/sketches/9D8047D669B2ADB9FDBCC0BAAD143A69/sketch_may2a.ino.elf /private/var/folders/nd/95n05jsj20g63nqfm1vz_vkm0000gn/T/arduino/sketches/9D8047D669B2ADB9FDBCC0BAAD143A69/sketch_may2a.ino.bin
/Users/emilpriv/Library/Arduino15/packages/arduino/tools/arm-none-eabi-gcc/7-2017q4/bin/arm-none-eabi-objcopy -O ihex -R .eeprom /private/var/folders/nd/95n05jsj20g63nqfm1vz_vkm0000gn/T/arduino/sketches/9D8047D669B2ADB9FDBCC0BAAD143A69/sketch_may2a.ino.elf /private/var/folders/nd/95n05jsj20g63nqfm1vz_vkm0000gn/T/arduino/sketches/9D8047D669B2ADB9FDBCC0BAAD143A69/sketch_may2a.ino.hex

Using library Stepper at version 1.1.3 in folder: /Users/emilpriv/Library/Arduino15/libraries/Stepper 
/Users/emilpriv/Library/Arduino15/packages/arduino/tools/arm-none-eabi-gcc/7-2017q4/bin/arm-none-eabi-size -A /private/var/folders/nd/95n05jsj20g63nqfm1vz_vkm0000gn/T/arduino/sketches/9D8047D669B2ADB9FDBCC0BAAD143A69/sketch_may2a.ino.elf
Sketch uses 12288 bytes (4%) of program storage space. Maximum is 262144 bytes.
Global variables use 2988 bytes (9%) of dynamic memory, leaving 29780 bytes for local variables. Maximum is 32768 bytes.